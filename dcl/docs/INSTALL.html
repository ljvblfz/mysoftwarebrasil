<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Rudimentary Installation Instructions for Double Choco Latte</TITLE>
<META NAME="description" CONTENT="Rudimentary Installation Instructions for Double Choco Latte">
<META NAME="keywords" CONTENT="INSTALL">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="INSTALL.css">

</HEAD>

<BODY >
<!--Navigation Panel-->
<IMG WIDTH="81" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next_inactive"
 SRC="file:/usr/lib/latex2html/icons/nx_grp_g.png"> 
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/lib/latex2html/icons/up_g.png"> 
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/lib/latex2html/icons/prev_g.png">   
<BR>
<BR>
<BR>
<!--End of Navigation Panel-->

<P>

<P>

<P>

<P>
<H1 ALIGN="CENTER">Rudimentary Installation Instructions for Double Choco Latte</H1>
<DIV>

<P ALIGN="CENTER"><STRONG>Author: Michael L. Dean</STRONG></P>
<P ALIGN="CENTER"><STRONG>$Id: INSTALL.lyx,v 1.1.1.1.2.3.2.2 2003/03/04 03:33:20 mdean Exp
$</STRONG></P>
</DIV>

<P>

<H1><A NAME="SECTION00010000000000000000">
1 Requirements</A>
</H1>

<P>
These items _must_ be setup, configured, and operating properly
for Double Choco Latte to function properly. We cannot provide guidance
for configuring this software. The accompanying documentation for
each package does a good job anyway.

<P>

<H2><A NAME="SECTION00011000000000000000">
1.1 Server Requirements </A>
</H2>

<P>

<OL>
<LI>Operating System which supports PHP/PostgreSQL/Apache

<P>

<UL>
<LI>Linux
</LI>
<LI>Windows NT, 2000 - should also work in 9x, Me as long as PHP works
</LI>
<LI>I have gotten some e-mails in the past suggesting it works in *BSD
and Solaris as well
</LI>
</UL>
</LI>
<LI>Apache Web Server (http://www.apache.org/), IIS, or any web server
supporting PHP
</LI>
<LI>PHP (http://www.php.net/)
</LI>
<LI>One of the following RDBMS

<P>

<OL>
<LI>PostgreSQL (http://www.postgresql.org/)
</LI>
<LI>MySQL (http://www.mysql.com/)
</LI>
<LI>Micro$oft SQL Server
</LI>
<LI>Sybase Adaptive Server Enterprise
</LI>
</OL>
</LI>
</OL>

<P>

<H2><A NAME="SECTION00012000000000000000">
1.2 Client Requirements </A>
</H2>

<P>
JavaScript enabled browser. Sorry that this is a requirement, but
if you do not want something that is (fancy, evil) such as JavaScript,
you should probably look at some of the other packages available for
free such as: 

<P>

<OL>
<LI>Mantis http://mantisbt.sourceforge.net/
</LI>
<LI>Request Tracker http://fsck.com/rt/
</LI>
<LI>Bugzilla http://bugzilla.mozilla.org/
</LI>
<LI>Jitterbug http://samba.anu.edu.au/jitterbug/
</LI>
</OL>

<P>

<H1><A NAME="SECTION00020000000000000000">
2 Setup</A>
</H1>

<P>
Starting with version 0.9.4, DCL has a web-based install/upgrade interface.
It was derived from the code used for XOOPS setup. <I>Be sure to
backup your database prior to running the upgrade!</I> It is much better
to be safe than sorry in this respect.

<P>
Point your browser to http://where.did.I.install/dcl/setup to begin
the wizard. It will ask you for your database connection information.
If you use a database user that is capable of creating databases and
this is a new installation with no database, the setup wizard will
attempt to create the database for you. If the user you will be connecting
as through DCL does not have this privilege, you will need to manually
create your database. See your documentation for your SQL server to
learn how to do this if necessary.

<P>
After you are finished with the setup wizard and have verified this
install is working properly, <I>delete the setup directory!!!</I>
It is an obvious security risk to leave this directory intact. Another
option is to protect the setup directory with web server security
(such as .htaccess and .htpasswd files for Apache). Removing the setup
directory is highly recommended, however.

<P>

<H2><A NAME="SECTION00021000000000000000">
2.1 Source Files</A>
</H2>

<P>

<OL>
<LI>Put the DCL source files under the web server DocumentRoot. We used
a subdirectory called 'dcl' for testing. You may also create a virtual
directory for DCL. See the documentation for your web server for instructions
on how to accomplish this.

<P>

<OL Type="a">
<LI>You don't have to move the entire tree over to the web server, and
may not want to. Files and directories you should exclude are: INSTALL,
README, TODO, ./inc/config.php.default, ./debian, ./docs, ./contrib,
and ./scripts.
</LI>
</OL>
</LI>
<LI>Install the system (http://localhost/dcl/setup/) as documented above.
If upgrading, <I>backup your database before running setup!</I>
</LI>
<LI>Access the system by using the URL you just created (i.e., http://localhost/dcl/).
</LI>
<LI>Login as sa with password sa. 
</LI>
<LI>Change sa password through the Admin...Change Password menu option.
</LI>
<LI>Go to Admin...System Setup and follow the steps to set up the system.
</LI>
</OL>

<P>

<H1><A NAME="SECTION00030000000000000000">
3 E-Mail Gateway Installation</A>
</H1>

<P>
Starting with version 20011208, DCL includes an e-mail gateway in
the contrib/gateway directory of the distribution. The gateway is
a PERL script that expects to receive e-mail piped to it from a MTA
such as sendmail or postfix. This section will attempt to provide
some direction for installation and configuration of the gateway,
along with a basic overview of how it works.

<P>

<H2><A NAME="SECTION00031000000000000000">
3.1 Operational Behavior</A>
</H2>

<P>
The steps involved in bringing tickets in through the e-mail gateway
can be summarized as follows. For the sake of providing examples,
we will assume Double Choco Latte (DCL) is the product.

<P>

<OL>
<LI>Issue reporter sends e-mail to dcl-support@mydomain.com
</LI>
<LI>MTA for mydomain.com recognizes dcl-support as an alias and forwards
it to the PERL script
</LI>
<LI>PERL script sections the e-mail into headers, body, and attachments.

<P>

<OL>
<LI>Defaults set from DCL config are: priority, severity, and status
</LI>
<LI>From: is sectioned into name and e-mail address and inserted into
contact and contact e-mail respectively
</LI>
<LI>To: is sectioned to retrieve product name. The address is formatted
as &lt;product_abbreviation&gt;-support@mydomain.com. The script retrieves
the product abbreviation, looks it up in DCL, and sets the product
ID for the ticket. If the product is not found, the script will exit
with an error message.
</LI>
<LI>The e-mail subject is inserted into the summary
</LI>
<LI>The e-mail body is inserted into the issue field, minus any attachments
</LI>
</OL>
</LI>
<LI>Using information in the headers, body, and DCL configuration, a ticket
is constructed
</LI>
<LI>The ticket is created and the files are ``attached'' to it
</LI>
<LI>Optional e-mail response is sent to originator of e-mail
</LI>
<LI>Responsible and watchers are notified of the new ticket
</LI>
<LI>Optionally, responses to the ticket autoresponse e-mail are appended
as ticket resolutions (TODO: this feature is not yet implemented)
</LI>
</OL>

<P>

<H2><A NAME="SECTION00032000000000000000">
3.2 Prerequisites</A>
</H2>

<P>
This has been used on a PERL installation as old as 5.005_03. PERL
modules required for this to operate include:

<P>

<OL>
<LI>MIME::Base64
</LI>
<LI>MIME::Parser
</LI>
<LI>MIME::QuotedPrint
</LI>
<LI>File::Basename
</LI>
<LI>DBI
</LI>
<LI>DBD driver for your SQL server (DBD::mysql or DBD::Pg)
</LI>
<LI>Net::SMTP
</LI>
</OL>
You can install these packages from the CPAN shell (perl -MCPAN -e
shell) by doing install &lt;packagename&gt; (e.g., install DBI)

<P>

<H2><A NAME="SECTION00033000000000000000">
3.3 Gateway Installation</A>
</H2>

<P>

<OL>
<LI>Place the dcl-gateway.pl script in a suitable location (mine is in
/etc/postfix). The postfix daemon must have read access to the directory
and the file should have executable permissions.
</LI>
<LI>Create a directory for the gateway script to use for temporary storage
(I used /usr/local/dcl/tmp). The MTA daemon should have read, write,
and execute for the directory. It also needs to be able to read, write,
and exectute directories where the DCL attachments are stored (e.g.,
/usr/local/dcl). <I>If this is not done correctly, any file attachments
in the e-mail will not be attached to the ticket!</I>
</LI>
</OL>

<P>

<H2><A NAME="SECTION00034000000000000000">
3.4 Configuration for Postfix MTA</A>
</H2>

<P>

<OL>
<LI>Edit the /etc/aliases (or /etc/postfix/aliases) file.

<P>

<OL>
<LI>Add aliases for each product you would like to route to the gateway.
</LI>
<LI>Aliases should pipe to the gateway script

<P>

<OL Type="i">
<LI>dcl-support: ``|/path/to/dcl-gateway.pl''
</LI>
</OL>
</LI>
</OL>
</LI>
<LI>Run the newaliases command
</LI>
<LI>Restart the postfix daemon (postfix reload)
</LI>
</OL>

<P>

<H2><A NAME="SECTION00035000000000000000">
3.5 Configuration for Sendmail MTA</A>
</H2>

<P>

<OL>
<LI>Sendmail requires executable files be placed or linked in /etc/smrsh
for security. Either ensure the dcl-gateway.pl file is in this directory
or create a symbolic like from the file to the /etc/smrsh directory.
</LI>
<LI>Edit the /etc/aliases file.

<P>

<OL>
<LI>Add aliases for each product you would like to route to the gateway.
</LI>
<LI>Aliases should pipe to the gateway script

<P>

<OL Type="i">
<LI>dcl-support: ``|/path/to/dcl-gateway.pl''
</LI>
</OL>
</LI>
</OL>
</LI>
<LI>Run the newaliases command
</LI>
<LI>Restart the sendmail daemon (/etc/rc.d/init.d/sendmail restart)
</LI>
</OL>

<P>

<H2><A NAME="SECTION00036000000000000000">
3.6 Configure the Gateway Script</A>
</H2>

<P>
The only configuration that has to be done in the script is setting
up your database settings. This should match how you have DCL set
up. If you are using multiple domains and want to receive e-mails
for each domain, you will need to create a copy of the gateway script
for each domain. Your aliases will point to the appropriate script
depending on the product in the To: address.

<P>

<H2><A NAME="SECTION00037000000000000000">
3.7 Configuring DCL for the Gateway</A>
</H2>

<P>
The Admin...System Setup...Configuration page now has a section for
configuring the e-mail gateway.

<P>

<OL>
<LI><B>e-Mail Gateway for Tickets Enabled</B> - must be checked in order
for tickets to be created. Otherwise, an error will occur and the
MTA will reject the e-mail.
</LI>
<LI><B>Send Auto-Response to Sender Upon Receipt</B> - If checked, a
quick e-mail is sent to the originator of the e-mail informing them
that the ticket was entered successfully into DCL.
</LI>
<LI><B>Auto-Response e-Mail Address</B> - The address to use in the
From: field of the auto-response e-mail. Must be set to the same as
your support address if the <I>Allow Replies to Append Ticket
Resolutions</I> feature is to be used.
</LI>
<LI><B>Allow Replies to Append Ticket Resolutions</B> - if the ticket
issuer responds to the auto-response e-mail, the resulting e-mail
will be appended to the ticket as a ticket resolution.
</LI>
<LI><B>Gateway Ticket Status</B> - the status to assign tickets created
by the gateway
</LI>
<LI><B>Gateway Ticket Priority</B> - the priority to assign tickets
created by the gateway
</LI>
<LI><B>Gateway Ticket Severity</B> - the severity to assign tickets
created by the gateway
</LI>
<LI><B>Decode File Path for Ticket Attachments</B> - the path to the
temporary file area for decoding attachments.
</LI>
</OL>
Also, the <I>e-Mail SMTP Server</I> section is used to configure
the SMTP server used for outgoing e-mails. If the <I>SMTP Enabled</I>
option is deselected, the responsible person for the ticket and the
watchers will not receive e-mail notifications of the ticket's entry.
Regardless of the <I>Enabled</I> option, the <I>Server</I>, <I>Port</I>,
and <I>Connection Timeout</I> settings are still used for auto-response
e-mails.

<P>

<H1><A NAME="SECTION00040000000000000000">
4 FAQ</A>
</H1>

<P>
<DL>
<DT><STRONG>Q.</STRONG></DT>
<DD>I installed DCL on a Windows NT Server running IIS and PHP. When
I try to login, I get a message saying ``Could not verify session.''
What could be wrong?
</DD>
<DT><STRONG>A.</STRONG></DT>
<DD>More than likely, you are running PHP as a CGI handler. A known
bug in IIS prevents cookies from being set properly if they are sent
in the header along with a Location: header for redirection. The best
fix at the moment is to change the redirMethod to meta.
</DD>
<DT><STRONG>Q.</STRONG></DT>
<DD>I went through the setup screen and configured DCL for our projects.
Now when I try to enter a work order or ticket, the priorities and
severities are empty after I select a product.
</DD>
<DT><STRONG>A.</STRONG></DT>
<DD>You need to add your new priorities and severities to the appropriate
attribute sets. Go to Admin...System Setup...Attributes. Click on
the View link for the set you want to modify. For each attribute,
click on the Map link and use the forms to modify the available items
and, in the case of priorities and severities, their weight (display
order) in the drop downs.
</DD>
<DT><STRONG>Q.</STRONG></DT>
<DD>When trying to login to DCL, I get the login screen with a message
that says ``Could not verify session''. I'm using IE.
</DD>
<DT><STRONG>A.</STRONG></DT>
<DD>Due to a strange bug in IE, you need to ensure you specify the
trailing slash of the URL (i.e., http://host.com/dcl/ and not http://host.com/dcl
). I assume this is a bug in IE since other browsers can cope with
it just fine.
</DD>
<DT><STRONG>Q.</STRONG></DT>
<DD>After installing the files and setting up the database, I get
this error when I go to index.php: Fatal error: Call to undefined
function: setdbformat() in /path/to/datetime.php on line n.
</DD>
<DT><STRONG>A.</STRONG></DT>
<DD>The problem is caused by the Alternative PHP Cache (APC) being
loaded. <I>This error should no longer happen (since 20010923
release). If you have the issue with a newer release, please report
it.</I>
</DD>
</DL>
If all else fails beyond repair, feel free to contact us. 

<P>
dcl-support@gnuenterprise.org

<H1><A NAME="SECTION00050000000000000000">
About this document ...</A>
</H1>
 <STRONG>Rudimentary Installation Instructions for Double Choco Latte</STRONG><P>
This document was generated using the
<A HREF="http://www.latex2html.org/"><STRONG>LaTeX</STRONG>2<tt>HTML</tt></A> translator Version 2002-2-1 (1.70)
<P>
Copyright &#169; 1993, 1994, 1995, 1996,
<A HREF="http://cbl.leeds.ac.uk/nikos/personal.html">Nikos Drakos</A>, 
Computer Based Learning Unit, University of Leeds.
<BR>
Copyright &#169; 1997, 1998, 1999,
<A HREF="http://www.maths.mq.edu.au/~ross/">Ross Moore</A>, 
Mathematics Department, Macquarie University, Sydney.
<P>
The command line arguments were: <BR>
 <STRONG>latex2html</STRONG> <TT>-no_subdir -split 0 -show_section_numbers /tmp/lyx_tmpdir978DABOF0/lyx_tmpbuf0/INSTALL.tex</TT>
<P>
The translation was initiated by Michael on 2003-11-04<HR>
<!--Navigation Panel-->
<IMG WIDTH="81" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next_inactive"
 SRC="file:/usr/lib/latex2html/icons/nx_grp_g.png"> 
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="file:/usr/lib/latex2html/icons/up_g.png"> 
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="file:/usr/lib/latex2html/icons/prev_g.png">   
<BR>
<!--End of Navigation Panel-->
<ADDRESS>
Michael
2003-11-04
</ADDRESS>
</BODY>
</HTML>
